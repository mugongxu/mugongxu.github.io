<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description"><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>CentOS7安装Jenkins - mugongxu的博客</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="https://github.com/mugongxu"><span>Github</span></a></li><li><a href="https://www.v2ex.com/"><span>V2EX</span></a></li><li><a href="http://m.xuguoqian.com/"><span>酷猫</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="http://callfiles.ueibo.com/hexo-theme-laughing/post_background.jpg"><div class="post-title"><h1 class="title">CentOS7安装Jenkins</h1><ul class="meta"><li><i class="icon icon-author"></i>mugongxu</li><li><i class="icon icon-clock"></i>8 Minutes</li><li><i class="icon icon-calendar"></i>2020年11月16日</li></ul></div></div><div class="article-content" style="max-width:800px"><h1 id="CentOS7安装Jenkins"><a href="#CentOS7安装Jenkins" class="headerlink" title="CentOS7安装Jenkins"></a>CentOS7安装Jenkins</h1><h2 id="首先登录服务器更新系统软件"><a href="#首先登录服务器更新系统软件" class="headerlink" title="首先登录服务器更新系统软件"></a>首先登录服务器更新系统软件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum update</span><br></pre></td></tr></table></figure>
<h2 id="安装Java和git"><a href="#安装Java和git" class="headerlink" title="安装Java和git"></a>安装Java和git</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ yum install java</span><br><span class="line">$ yum install git</span><br></pre></td></tr></table></figure>
<p>注意java的版本来选择不同版本的Jenkins，上面一般会自动安装最行版本的Java-sdk。</p>
<h2 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ yum install nginx //安装</span><br><span class="line">$ service nginx start //启动</span><br></pre></td></tr></table></figure>
<p>出现Redirecting to /bin/systemctl start nginx.service<br>说明nginx已经启动成功了，访问http://你的ip/，如果成功安装会出来nginx默认的欢迎界面</p>
<h2 id="安装Jenkins"><a href="#安装Jenkins" class="headerlink" title="安装Jenkins"></a>安装Jenkins</h2><p>首先我们进入到<code>Jenkins</code>官网，传送门：<a href="https://jenkins.io/download/" target="_blank" rel="noopener">https://jenkins.io/download/</a><br>这时我们会看到两栏，左边的<code>Stable (LTS)</code>是12周发布一版，右边的<code>Weekly</code>是每周发布一个版本。<br>这里我们以<code>Stable</code>为例进行安装，拖动页面找到你自己的系统并点击<br><img src="./stable.png" alt="图片"><br>选择<code>Weekly</code>版本时，有可能受网络、<code>jenkins.noarch</code>导入不了等原因安装不成功，同时有可能安装成功后，<code>插件</code>无法安装</p>
<h3 id="添加Jenkins-repo"><a href="#添加Jenkins-repo" class="headerlink" title="添加Jenkins repo:"></a>添加Jenkins repo:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins.io/redhat-stable/jenkins.repo</span><br><span class="line">rpm --import http://pkg.jenkins.io/redhat-stable/jenkins.io.key</span><br></pre></td></tr></table></figure>
<h3 id="更新Jenkins-repo-cache："><a href="#更新Jenkins-repo-cache：" class="headerlink" title="更新Jenkins repo cache："></a>更新Jenkins repo cache：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure>
<h3 id="安装Jenkins："><a href="#安装Jenkins：" class="headerlink" title="安装Jenkins："></a>安装Jenkins：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y jenkins</span><br></pre></td></tr></table></figure>
<p>如果yum install安装慢，可以多尝试几次（网络对<code>jenkins.noarch</code>的下载很重要，有很大概率会失败），也可以到<a href="http://pkg.jenkins-ci.org/redhat-stable/" target="_blank" rel="noopener">http://pkg.jenkins-ci.org/redhat-stable/</a> 中下载指定版本的安装包，再通过rpm来安装。</p>
<p>也可以使用国内Jenkins镜像来安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 清华大学镜像</span><br><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/jenkins/redhat-stable/jenkins-2.164.2-1.1.noarch.rpm</span><br><span class="line">rpm -ivh jenkins-2.164.2-1.1.noarch.rpm</span><br></pre></td></tr></table></figure></p>
<h2 id="启动Jenkins"><a href="#启动Jenkins" class="headerlink" title="启动Jenkins"></a>启动Jenkins</h2><h3 id="安装完成后启动Jenkins："><a href="#安装完成后启动Jenkins：" class="headerlink" title="安装完成后启动Jenkins："></a>安装完成后启动Jenkins：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 检查Jenkins服务状态</span><br><span class="line">sudo systemctl status jenkins</span><br><span class="line"># 设置为开机自启动</span><br><span class="line">sudo systemctl enable jenkins</span><br><span class="line"># 启动Jenkins服务</span><br><span class="line">sudo systemctl start jenkins</span><br></pre></td></tr></table></figure>
<h3 id="为Jenkins开启防火墙8080端口："><a href="#为Jenkins开启防火墙8080端口：" class="headerlink" title="为Jenkins开启防火墙8080端口："></a>为Jenkins开启防火墙8080端口：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 检查防火墙配置</span><br><span class="line">sudo firewall-cmd --list-all</span><br><span class="line"># 开启8080端口</span><br><span class="line">sudo firewall-cmd --zone=public --add-port=8080/tcp </span><br><span class="line">sudo firewall-cmd --zone=public --add-port=8080/tcp --permanent</span><br><span class="line"># 重新加载防火墙配置</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<p>在浏览器中访问<code>http://&lt;jenkins_host_ip&gt;:8080</code>确认是否可以打开Jenkins的<code>Getting Started</code>页面。<br>运行<code>sudo cat /var/lib/jenkins/secrets/initialAdminPassword</code>，复制Jenkins初始密码，输入到Jenkins的Getting Started页面来<code>Unlock Jenkins</code>。</p>
<h2 id="配置Jenkins"><a href="#配置Jenkins" class="headerlink" title="配置Jenkins"></a>配置Jenkins</h2><p>这里一般使用推荐插件进行安装，等待Jenkins插件安装完成。</p>
<p>使用<code>http://pkg.jenkins-ci.org/redhat/jenkins.repo</code>或<code>https://pkg.jenkins.io/redhat/jenkins.repo</code>，安装最新版本的<code>Jenkins</code>都有大概率的<code>jenkins.noarch</code>或<code>插件</code>安装失败，按照网上的各种处理方式都没有办法处理<br>例如：系统管理 -》 插件管理 -》 高级<br>将升级站点的URL<code>http://updates.jenkins-ci.org/update-center.json</code>更改为<code>http://mirror.esuni.jp/jenkins/updates/update-center.json</code><br><img src="./jenkins.png" alt="图片"></p>
<p>创建Jenkins的管理员账号，用该账号来登录Jenkins继续其它配置</p>
<h2 id="卸载Jenkins"><a href="#卸载Jenkins" class="headerlink" title="卸载Jenkins"></a>卸载Jenkins</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 卸载rpm方式安装的jenkins</span><br><span class="line">rpm -e jenkins</span><br><span class="line"></span><br><span class="line">// 检查是否卸载成功</span><br><span class="line">rpm -ql jenkins</span><br><span class="line"></span><br><span class="line">// 彻底删除残留文件</span><br><span class="line">find / -iname jenkins | xargs -n 1000 rm -rf</span><br></pre></td></tr></table></figure>
</div><div class="article-meta" style="max-width:800px"></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2020/06/16/CommonsChunkPlugin代码拆分挖坑之路/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/BoizZ" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="https://weibo.com/heqibang" title="Weibo" target="_blank"><i class="icon icon-weibo"></i></a></li><li><a href="https://www.segmentfault.com/u/bon" title="SegmentFault" target="_blank"><i class="icon icon-segmentfault"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2020 mugongxu的博客</p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>